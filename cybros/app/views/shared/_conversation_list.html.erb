<% conversations = Array(conversations) %>
<% has_more = !!local_assigns.fetch(:has_more, false) %>
<% before_cursor = local_assigns.fetch(:before_cursor, nil).to_s.presence %>

<label class="input input-sm w-full mb-2">
  <span class="label">
    <span class="icon-[lucide--search] size-4 opacity-60"></span>
  </span>
  <input type="search" placeholder="Search" />
</label>

<% if conversations.empty? %>
  <div class="text-xs opacity-60 px-2">No conversations yet.</div>
<% else %>
  <ul class="menu menu-sm" data-infinite-scroll-target="list">
    <%= render "shared/conversation_items", conversations: conversations %>
  </ul>

  <% if has_more && before_cursor.present? %>
    <div data-infinite-scroll-target="sentinel" class="flex justify-center py-2">
      <span class="loading loading-spinner loading-sm"></span>
    </div>
  <% end %>
<% end %>
